<app-header></app-header>

<div class="app-shell">
  <div class="page-head">
    <h2 class="page-title">Update Record</h2>
    <a class="btn btn-light" routerLink="/records">Back</a>
  </div>

  <div class="card card-premium">
    <div class="card-body">

      <form [formGroup]="form" (ngSubmit)="submit()">

        <div class="row g-4">

          <!-- RECORD DETAILS -->
          <div class="col-lg-6">
            <div class="section-label">Record details</div>

            <label class="form-label fw-bold">Title</label>
            <input class="form-control mb-2" formControlName="title">

            <label class="form-label fw-bold">Artist</label>
            <input class="form-control mb-2" formControlName="artist">

            <label class="form-label fw-bold">Format</label>
            <select class="form-select mb-2" formControlName="format">
              <option value="">Select format</option>
              <option *ngFor="let f of formats" [value]="f">{{ f }}</option>
            </select>

            <label class="form-label fw-bold">Genre</label>
            <select class="form-select mb-2" formControlName="genre">
              <option value="">Select genre</option>
              <option *ngFor="let g of genres" [value]="g">{{ g }}</option>
            </select>

            <label class="form-label fw-bold">Release Year</label>
            <input class="form-control mb-1" formControlName="releaseYear"
              [ngClass]="{'is-invalid': form.get('releaseYear')?.invalid && form.get('releaseYear')?.touched}">
            <div class="text-danger small" *ngIf="form.get('releaseYear')?.invalid && form.get('releaseYear')?.touched">
              Year must be exactly 4 digits
            </div>

            <label class="form-label fw-bold">Price (â‚¬)</label>
            <input class="form-control mb-1" formControlName="price"
              [ngClass]="{'is-invalid': form.get('price')?.invalid && form.get('price')?.touched}">
            <div class="text-danger small" *ngIf="form.get('price')?.invalid && form.get('price')?.touched">
              Numeric value only
            </div>

            <label class="form-label fw-bold">Stock Quantity</label>
            <input class="form-control mb-1" formControlName="stockQuantity"
              [ngClass]="{'is-invalid': form.get('stockQuantity')?.invalid && form.get('stockQuantity')?.touched}">
            <div class="text-danger small" *ngIf="form.get('stockQuantity')?.invalid && form.get('stockQuantity')?.touched">
              Whole numbers only
            </div>
          </div>

          <!-- CUSTOMER DETAILS -->
          <div class="col-lg-6">
            <div class="section-label">Customer details</div>

            <label class="form-label fw-bold">Customer ID</label>
            <input class="form-control mb-2" formControlName="customerId">

            <label class="form-label fw-bold">First Name</label>
            <input class="form-control mb-1" formControlName="firstName"
              [ngClass]="{'is-invalid': form.get('firstName')?.invalid && form.get('firstName')?.touched}">
            <div class="text-danger small" *ngIf="form.get('firstName')?.invalid && form.get('firstName')?.touched">
              Letters only
            </div>

            <label class="form-label fw-bold">Last Name</label>
            <input class="form-control mb-1" formControlName="lastName"
              [ngClass]="{'is-invalid': form.get('lastName')?.invalid && form.get('lastName')?.touched}">
            <div class="text-danger small" *ngIf="form.get('lastName')?.invalid && form.get('lastName')?.touched">
              Letters only
            </div>

            <label class="form-label fw-bold">Contact Number</label>
            <div class="input-group mb-1">
              <select class="form-select" formControlName="countryCode">
                <option *ngFor="let c of countryCodes" [value]="c.code">{{ c.label }}</option>
              </select>
              <input class="form-control" formControlName="contactNumber"
                [ngClass]="{'is-invalid': form.get('contactNumber')?.invalid && form.get('contactNumber')?.touched}">
            </div>
            <div class="text-danger small" *ngIf="form.get('contactNumber')?.invalid && form.get('contactNumber')?.touched">
              Numeric, minimum 8 digits
            </div>

            <label class="form-label fw-bold">Email</label>
            <input class="form-control mb-1" formControlName="email"
              [ngClass]="{'is-invalid': form.get('email')?.invalid && form.get('email')?.touched}">
            <div class="text-danger small" *ngIf="form.get('email')?.invalid && form.get('email')?.touched">
              Valid email required
            </div>
          </div>

        </div>

        <div class="text-end mt-3">
          <button class="btn btn-warning px-4" [disabled]="form.invalid">Update</button>
        </div>

      </form>
    </div>
  </div>
</div>
