<app-header></app-header>

<div class="app-shell">
  <div class="page-head">
    <div>
      <h2 class="page-title">Add Record</h2>
      <p class="page-subtitle">Create a new entry with customer purchase details.</p>
    </div>
    <a class="btn btn-light" routerLink="/records">Back</a>
  </div>

  <div class="card card-premium">
    <div class="card-body">

      <form [formGroup]="form" (ngSubmit)="submit()">

        <div class="row g-4">

          <!-- Left: Record Details -->
          <div class="col-12 col-lg-6">
            <div class="section-label">Record details</div>

            <div class="mb-3">
              <label class="form-label fw-bold">Title</label>
              <input class="form-control" formControlName="title" placeholder="Title">
              <div class="text-danger small mt-1"
                   *ngIf="form.get('title')?.touched && form.get('title')?.invalid">
                Title is required
              </div>
            </div>

            <div class="mb-3">
              <label class="form-label fw-bold">Artist</label>
              <input class="form-control" formControlName="artist" placeholder="Artist">
              <div class="text-danger small mt-1"
                   *ngIf="form.get('artist')?.touched && form.get('artist')?.invalid">
                Artist is required
              </div>
            </div>

            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label fw-bold">Format</label>
                <select class="form-select" formControlName="format">
                  <option value="">Select format</option>
                  <option *ngFor="let f of formats" [value]="f">{{ f }}</option>
                </select>
              </div>

              <div class="col-md-6">
                <label class="form-label fw-bold">Genre</label>
                <select class="form-select" formControlName="genre">
                  <option value="">Select genre</option>
                  <option *ngFor="let g of genres" [value]="g">{{ g }}</option>
                </select>
              </div>

              <div class="col-md-4">
                <label class="form-label fw-bold">Release Year</label>
                <input class="form-control" formControlName="releaseYear" placeholder="2001">
              </div>

              <div class="col-md-4">
                <label class="form-label fw-bold">Price (â‚¬)</label>
                <input class="form-control" formControlName="price" placeholder="19.99">
              </div>

              <div class="col-md-4">
                <label class="form-label fw-bold">Stock Qty</label>
                <input class="form-control" formControlName="stockQuantity" placeholder="5">
              </div>
            </div>
          </div>

          <!-- Right: Customer Details -->
          <div class="col-12 col-lg-6">
            <div class="section-label">Customer details</div>

            <div class="mb-3">
              <label class="form-label fw-bold">Customer ID</label>
              <input class="form-control" formControlName="customerId" placeholder="1234A">
            </div>

            <div class="row g-3">
              <div class="col-md-6">
                <label class="form-label fw-bold">First Name</label>
                <input class="form-control" formControlName="firstName">
              </div>

              <div class="col-md-6">
                <label class="form-label fw-bold">Last Name</label>
                <input class="form-control" formControlName="lastName">
              </div>

              <!-- ðŸ“ž CONTACT NUMBER WITH COUNTRY CODE -->
              <div class="col-md-12">
                <label class="form-label fw-bold">Contact Number</label>

                <div class="input-group">
                  <select
                    class="form-select"
                    style="max-width: 160px"
                    formControlName="countryCode"
                  >
                    <option *ngFor="let c of countryCodes" [value]="c.code">
                      {{ c.label }}
                    </option>
                  </select>

                  <input
                    class="form-control"
                    formControlName="contactNumber"
                    placeholder="77123456"
                  >
                </div>

                <div class="text-danger small mt-1"
                     *ngIf="form.get('contactNumber')?.touched && form.get('contactNumber')?.invalid">
                  Numeric, at least 8 digits
                </div>
              </div>

              <div class="col-md-12">
                <label class="form-label fw-bold">Email</label>
                <input class="form-control" formControlName="email">
              </div>
            </div>
          </div>
        </div>

        <hr class="hr-soft">

        <div class="d-flex justify-content-end gap-2">
          <a class="btn btn-light" routerLink="/records">Cancel</a>
          <button class="btn btn-primary px-4" type="submit" [disabled]="form.invalid">
            Add Record
          </button>
        </div>

      </form>
    </div>
  </div>
</div>
